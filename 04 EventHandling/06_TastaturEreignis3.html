<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Einführung in Javascript</title>
  <style>
    #fred {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 60px;
      height: 60px;
      background-image: url(mats/fred_move.png);
      background-position: 0 0;
    }
    #spielfeld {
      position: absolute;
      top: 100px;
      left: 50px;
      background: lightgreen;
      border: 3px solid green;
      overflow: hidden;
      width: 600px;
      height: 800px;
    }
  </style>
</head>

<body>
  <h1>Überschrift</h1>
  <section id="spielfeld">
    <div id="fred"></div>
  </section>
  <div id="ausgabe"></div>
  <script>

    let position = [100, 100]
    /*
      position[0] = x-position von fred   left
      position[1] = y-position von fred   top
    */
    let schritt = 6
    let hintergrundX = 0
    let hintergrundY = 0


    document.addEventListener('keydown', function (evt) {
      document.getElementById('ausgabe').innerHTML = evt.which
      let fred = document.getElementById('fred')

      switch (evt.which) {
        case 37:
        case 65:
          // Schritt nach links
          position[0] -= schritt
          hintergrundY = '-64px'
          break
        case 38:
        case 87:
          // Schritt nach oben
          position[1] -= schritt
          hintergrundY = '-192px'
          break
        case 39:
        case 68:
          // Schritt nach rechts
          position[0] += schritt
          hintergrundY = '-128px'
          break
        case 40:
        case 83:
          // Schritt nach unten
          position[1] += schritt
          hintergrundY = '0'
      }
      hintergrundX -= 64
      if (hintergrundX < -192) 0

      if (position[0] < -40) position[0] = 590
      if (position[0] > 590) position[0] = -40

      if (position[1] < -10) position[1] = -10
      if (position[1] > 740) position[1] = 740
      

      fred.style.left =  position[0] + 'px'
      fred.style.top =  position[1] + 'px'
      fred.style.backgroundPosition = hintergrundX + 'px ' + hintergrundY

    })


  </script>
</body>

</html>